[![EN](https://user-images.githubusercontent.com/9499881/33184537-7be87e86-d096-11e7-89bb-f3286f752bc6.png)](https://github.com/r57zone/DualShock4-emulator/) 
[![RU](https://user-images.githubusercontent.com/9499881/27683795-5b0fbac6-5cd8-11e7-929c-057833e01fb1.png)](https://github.com/r57zone/DualShock4-emulator/blob/master/README.RU.md)
# DualShock4 emulator
Простое приложение для эмуляции геймпада Sony DualShock 4, с помощью Xbox контроллера или клавиатуры и мыши. Данный способ необходим для полноценной работы сервиса [Sony Playstation Now](https://www.playstation.com/en-us/explore/playstation-now/) или [Playstation Remote Play](https://www.playstation.com/remote-play/). Работает на базе драйвера [ViGEm](https://github.com/ViGEm).

## Настройка
1. Установить [ViGEmBus](https://github.com/ViGEm/ViGEmBus/releases).
2. Установите Microsoft Visual C++ Redistributable 2017 или новее.
3. Распаковать и запустить DualShock4 emulator.
4. Запустить "PlayStation Now" или другое приложение.
5. При необходимости можно инвертировать оси, измените параметры `InvertX` и `InvertY` на `1`, в конфигурационном файле "Config.ini".

## Xbox контроллер
Кнопка "Назад" на Xbox контроллере эмулирует нажатие тачпада на Sony DualShock 4.

Кнопка "Поделиться" привязана на одновременное нажатие кнопок "Назад" и "Старт" или на клавишу "F12".

Кнопка "PS" привязана на одновременное нажатие кнопок "Назад" и "LB" (левый бампер) или на клавишу "F2".

Потрясти геймпад (гироскоп) можно нажав "Back" и "RB" (правый бампер). 


При необходимости можно обменять местами бамперы и триггеры, а также кнопку "поделится" и нажатие тачпада, для этого в конфигурационном файле "Config.ini" нужно изменить параметр `SwapTriggersShoulders` или `SwapShareTouchPad` на `1`.



Поддерживается изменение мёртвой зоны стиков для дрейфующих стиков. Нажмите "ALT" + "F9" для получения значений, вставьте их в конфигурационный файле "Config.ini", в параметры `DeadZone` и перезапустите программу.

## Тачпад
Игра | Действие
------------ | -------------
Uncharted 3: Иллюзии Дрейка (2011) | Кнопка "Share" (F12) дублирует нажатие левой части тачпада.
Одни из нас. Часть II (2020) | Можно заменить нажатие тачпада кнопками. Параметры -> Доступность -> "Настройки бренчания" вместо вертикальной и горизонтальной ставим кнопки.

На Xbox геймпаде необходимо нажать кнопку "Назад" (тачпад) и двигать стик в стороны для свайпов. По умолчанию нажатие тачпада при свайпах выключено, его можно включить в конфигурационном файле, изменив параметр `TouchPadPressedWhenSwiping` на `1`.



Для клавиатуры можно использовать свайпы, коды кнопок описаны ниже.

## Гироскоп
1. Проверьте брандмауэр Windows, разрешены ли входящие подключения у вашего типа сети (частной) и разрешите если отключены. 
2. Измените параметр `Activate` на `1`, в разделе `Motion`, в конфигурационном файле.
3. Установите FreePieIMU на ваш Android телефон, введите IP адрес вашего компьютера, отметьте пункт "Send raw data", если не отмечен, выберите скорость передачи данных "Fastest" или "Fast".
4. Уменьшите чувствительность при необходимости (параметр `Sens`, в разделе `Motion`, где 100 это 100% чувствительности) в конфигурационном файле.



Если в игре нужно просто потрести (гироскоп) геймпад, то нет необходимости в установке приложений для Android, просто нажмите кнопку "тряски" геймпада.

## Клавиатура и мышь
По умолчанию мышь и клавиатура работает только в окнах "PlayStation™Now" и "PS4 Remote Play" (измените параметр `ActivateOnlyInWindow2` на региональный заголовок приложения, например "Дистанционное воспроизведение PS4"). Для работы только в каких-либо других приложениях или эмуляторах измените параметры `ActivateOnlyInWindow` и `ActivateOnlyInWindow2` на заголовки этих приложений. Можно включить работу во всех окнах (измените параметр `ActivateInAnyWindow` на `1`, в конфигурационном файле "Config.ini") или измените название окна (параметр `ActivateOnlyInWindow`), в котором захватываются действия. Это необходимо, чтобы курсор центрировался только в одном окне и не нажимались кнопки при свёрнутом окне.

Для отключения центрирования курсора зажмите кнопку "C" (можно изменить в конфиге - `StopСenteringKey`).

Для скрытия курсора при запуске измените `HideCursorAfterStart` на `1`, чтобы восстановить курсор, закройте программу нажав "ALT" + "ESCAPE" или "~". 

Для полноэкранного режима Playstation Now используйте клавиши "ALT" + "F10", верхняя черная полоса, а также панель задач будут скрыты. Для того, чтобы вернуть обычное окно нажмите эти клавиши снова. Отключить скрытие панели задач можно в конфигурационном файле, изменив параметр `HideTaskBarInFullScreen` на `0`. В случае если окно Playstation Now однажды изменится, то можно изменить смещение сверху по умолчанию, параметр `FullScreenTopOffset`.

DualShock 4 | Клавиатура и мышь
------------ | -------------
L1 | Control
R2 | Alt
L2 | Правая кнопка мыши
R2 | Левая кнопка мыши
SHARE | F12
TOUCHPAD (нажатие тачпада) | Enter
OPTIONS | Tab
DPAD UP (стрелка вверх) | 1
DPAD LEFT (стрелка влево) | 2
DPAD RIGHT (стрелка вправо) | 3
DPAD DOWN (стрелка вниз) | 4
TRIANGLE (треугольник) | Q
SQUARE (квадрат) | E
CIRCLE (круг) | R
CROSS (крестик) | Space
L3 (нажатие стика) | Shift
R3 (нажатие стика) | Средняя кнопка мыши
Touchpad свайп вверх, вниз, влево, вправо | 7, 8, 9, 0
Touchpad вверх, вниз, влево, вправо, вниз  | U, J, H, K, N
Потрясти геймпад | T
PS | F2

В конфигурационном файле "Config.ini" можно заменить привязки кнопок. Коды кнопок можно найти [здесь](https://github.com/r57zone/Half-Life-Alyx-novr/blob/master/BINDINGS.RU.md). 



Параметры чувствительности `SensX`, `SensY` для мыши можно также найти в конфигурационном файле, в разделе "Mouse". При отсуствии движения стика можно попробовать увеличить параметр "SleepTimeOut" до 2, 4, 8, 10.



Также можно включить эмуляцию аналоговых триггеров (L2, R2), измените параметр `EmulateAnalogTriggers` на `1` и шаг увеличения `AnalogTriggerStep` (от 0.1 до 255).

## Загрузка
>Версия для Windows 10.

**[Загрузить](https://github.com/r57zone/DualShock4-emulator/releases)**

## Обратная связь
`r57zone[собака]gmail.com`